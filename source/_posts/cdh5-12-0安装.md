---
title: cdh5.12.0安装
date: 2018-02-04 14:00:09
categories: 
- [大数据]
---

### 安装Cloudera Manager

本文采用离线安装cdh5.12.0，所有安装包的版本均为5.12.0，安装所需的离线包均需提前下载，下文将给出对应下载链接地址和配置。**安装的操作系统为centos 7及以上系统，其他系统和版本可以需自行下载对应的rpm**

##### 下载cloudera-manager.repo（所有节点均需配置）

- [下载链接](http://archive.cloudera.com/cm5/redhat/7/x86_64/cm/cloudera-manager.repo  "下载链接")

- cloudera-manage.repo配置(所有节点均需配置，仅仅展示主节点的配置如下)

  ```bash
  [root@n171 cdh] cat /etc/yum.repos.d/cloudera-manager.repo
  [cloudera-manager]
  name = Cloudera Manager, Version 5.12.0
  baseurl = https://archive.cloudera.com/cm5/redhat/7/x86_64/cm/5.12.0/
  gpgkey = https://archive.cloudera.com/redhat/cdh/RPM-GPG-KEY-cloudera
  gpgcheck = 1

  # 验证生效
  yum clean all  
  yum list | grep cloudera  
  # 确认显示的版本是否正确（我这里显示5.12.0-1.cm5120.p0.120.el7）
  ```

##### 下载cloudera-manager-installer.bin（主节点需配置，从节点无须配置）

- [下载链接](http://archive.cloudera.com/cm5/installer/5.12.0/cloudera-manager-installer.bin)

- 放置在/opt目录，并添加执行权限

  ```bash
  chmod +x /opt/cloudera-manager-installer.bin
  ```

- 配置完毕后验证[root@n171 cdh] `ll /opt/cloudera-manager-installer.bin`

    -rwxr-xr-x 1 root root 519670 6月  21 02:43 /opt/cloudera-manager-installer.bin

##### 下载RPMS

- [下载链接(下载目录下所有文件)](http://archive.cloudera.com/cm5/redhat/7/x86_64/cm/5.12.0/RPMS/x86_64/)

- 新建放置目录 `mkdir -p /opt/cloudera-RPMS/`

- 下载完毕后：

  - master节点，目录结构如下

  ```bash
  [root@n171 cdh]# ls /opt/cloudera-RPMS/
  cloudera-manager-agent-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  cloudera-manager-daemons-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  cloudera-manager-server-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  cloudera-manager-server-db-2-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  enterprise-debuginfo-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  oracle-j2sdk1.7-1.7.0+update67-1.x86_64.rpm
  ```
  - slave节点(不需要server相关的rpm，只需要agent相关rpm)，目录结构如下
  ```bash
  [root@n172 parcel-repo]# ls /opt/cloudera-RPMS/
  cloudera-manager-agent-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  cloudera-manager-daemons-5.12.0-1.cm5120.p0.120.el7.x86_64.rpm
  ```

##### 下载CDH-Parcel

- [下载链接](http://archive.cloudera.com/cdh5/parcels/5.12.0/ "下载CDH-Parcel文件")

- 新建放置目录 `mkdir -p /opt/cloudera/parcel-repo/`

- 下载完毕后(**所有节点**)，目录结构如下
```bash
  [root@n171 cdh]# ls /opt/cloudera/parcel-repo/
  CDH-5.12.0-1.cdh5.12.0.p0.29-el7.parcel
  CDH-5.12.0-1.cdh5.12.0.p0.29-el7.parcel.sha
  manifest.json
  注意:下载后将.sha1文件后缀更改为.sha
```
##### 执行安装

- 所有节点执行

```bash
cd /opt/cloudera-RPMS  
yum -y localinstall --nogpgcheck *.rpm  
```

- master节点执行

```bash
# 拷贝cloudera-manage-installer.bin到/opt/
# +x 权限
sudo chmod +x /opt/cloudera-manager-installer.bin
/opt/cloudera-manager-installer.bin
```

#####   访问安装界面
```
    http://Master主机的IP:7180/ 
    如果不能访问，稍等刷新再试，服务启动需要一定时间
```


##### 参考链接：

- [CDH5.12.0安装官网链接](https://www.cloudera.com/documentation/enterprise/5-12-x/topics/installation.html)

